<!DOCTYPE >
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>慧松抽奖</title>
    <style>
        body{
            width: 1920px;
            height: 100%;
            margin: 0;
            padding: 0;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            background-color: #7b0000;
        }
        .container {
            width: 100%;
            height: 100%;
            background-image: url(img/logo-bg.png);
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
        }

        .namelist {
            position: absolute;
            display: inline-block;
            color: #fff;
            width: 1070px;
            font-size: 50px;
            top: 330px;
            left: 419px;
            text-align: center;

        }
        .namelist span{
            display: inline-block;
            font-size: 50px;
            margin: 0 10px 10px 0;
            width: 101px;
            text-align: center;
        }
        .do-select{
            position: absolute;
            display: inline-block;
            width: 230px;
            height: 76px;
            font-size: 0px;
            top: 670px;
            left: 840px;
            text-align: center;
            background-color: transparent;
            border: none;
            background-image: url(img/start-btn.png) ;
            background-repeat: no-repeat;
            background-size: cover;
        }
        .do-select.stop-btn{
            background-image: url(img/stop-btn.png) ;
        }
    </style>
</head>
<body>
<div class="container">
    <div id="box" class="namelist"><p style="margin:0 ">亲，祝你好运!</p><span></span><span></span><span></span></div>
    <button type="button" id="bt" class="do-select" onClick="doit(this)" date-time="10">开始抽奖</button>
</div>

<script src="jquery-1.10.1.min.js"></script>
<script src='name.js'></script>
<script>
    $(document).ready(function(){
        resizeWidth()
    });
    $(window).resize(function() {
        resizeWidth()
    });
    function resizeWidth() {
        var s=($(window).width() / $(document.body).outerWidth(true));
        console.log(s);
        $('html').css({
            transform: "scale(" + s + ")",
            transformOrigin: "left top",
        });
    }
</script>
<script type="text/javascript">
    var mytime = null;
    var showName=namelist;
    function doit(i) {
        var t = $(i).attr("date-time");
        var bt = $("#bt");
        if (mytime == null) {
            bt.html("停止抽奖");
            bt.addClass("stop-btn");
            show(t);
        } else {
            bt.html("开始抽奖");
            bt.removeClass("stop-btn");
            clearTimeout(mytime);
            mytime = null;
            selectedPerson(t)
        }
    }
    function show() {
        var box = $("#box").find('span');
        var num = Math.floor((Math.random() * 100000)) % namelist.length;
        box.html(showName[num]);
        mytime = setTimeout("show()", 1);
    }
    function selectedPerson(t) {
        var box = $("#box");
        var name = [];
        var namehtml='<p style="margin:0">亲，祝你好运!</p>';
        if(t<namelist.length){
            for (var i = 0; i < t; i++) {
                var num = Math.floor((Math.random() * 1000000)) % namelist.length;
                name.push(namelist[num]);
                namehtml +='<span>'+namelist[num]+'</span>';
                namelist.splice(num, 1);
            }
            box.html(namehtml);
            console.log(name);
        }else {
//            alert("人数不足 无法抽奖");
            box.html("对不起！参与人数少于中奖人数");
        }


    }

</script>

</body>
</html>